# 01-1 仿真器搭建

## 相关关键词

> ros yaml文件 gazebo仿真器 rviz仿真器 pyBullet仿真器

## 任务目标

前期我们的任务并不会涉及实物机器人，由于安全规范，所有算法需要在仿真器内成功运行后再进行十五机器人测试，而最终的成果中需要仿真和实物机器人执行相同的任务并且能够保持一致的达到目标

初期我们使用的机器人有两款，分别是 franka panda（309的那款，我们可以攒3台出来）和 UR （吴丹办公室的那款）。真正的多机械臂写作和演示需要多台设备共同开工，所以仿真器的搭建也主要在这两款机器人上进行。
![图 0](images/%E4%BB%BF%E7%9C%9F%E5%99%A8%E5%AE%9E%E4%BE%8B%E5%9B%BE.png)  

推荐使用的仿真器是 gazebo 和 rviz ，无他，之前济川哥用过，有问题可以有人问。建议先从 Panda 的仿真器开始配置。当然，受苦于对ros系统的需求和linux系统的需求的话，也可以使用 pyBullet 仿真器，这个仿真器是使用 python 编写的，对平台没有那么多限制，就是可能在性能上有所损失，林世泽师兄使用过该仿真器，有问题可以找他。

总而言之，如果从 windows 下开发，就从 pyBullet 开始，如果从 linux 下开发，就从 gazebo 开始。最后的这些仿真器都会被实现，但或许不是现在了

（悄悄说现在 windows 也有 ros 了，不过是不稳定版本。但是ros2已经支持了，也可以一试哦）

## 任务解释

仿真器实现的目标分为以下几点：

- [ ] 机器人相关
  - [ ] 能够加载机器人模型并渲染
  - [ ] 能够接受由控制器发送的控制指令，通常是关节力矩或者关节角度，这取决于控制器输出结果，不过最常规的就是关节力矩
  - [ ] 能够根据控制器的控制指令模拟机器人的运动，并返回机器人的状态
- [ ] 障碍物相关
  - [ ] 可以导入静态障碍物，如环境等
  - [ ] 可以导入动态障碍物，如其他机器人或动态环境干扰等

上述功能与外界的通讯建议以ros实现，当然，其他通讯方式来者不拒，能够以 rust 为主的方式实现的话，那就更好了，毕竟和核心统一的话就可以更快而减少中间损耗。

本任务相关代码建议保存在 `/crates/simulator` 目录下，机器人3d模型保存在 `/crates/robot/models` 目录下,不同语言的保存位置建议参照 `0_项目入门.md`。不同的仿真器建议在 `/crates/simulatorsimulators` 目录下建立不同的文件夹，如 gazebo、rviz、pybullet 等。
