# 2-11 多臂避障

## 相关关键词

> robot cfs 多臂

## 任务目标

单臂CFS已经实现，现在需要实现多臂CFS。

多臂的cfs需要添加枝节点。cfs枝节点可以抑制其子节点使用求解器求解，并且需要收到子节点上传优化问题并且做笛卡尔积。

几个关键难点在于：

- 如何抑制子节点求解以及搭建通讯？枝节点的新建在子节点之前，因此没法再子节点新建时抑制子节点同时建立通讯。

可以在 add_planner 的环节中抑制子子节点并搭建与子节点之间的通讯。

- 通讯的内容和通讯的类型分别是什么。理论上来说从父节点到子节点只应该传递无泛型的消息类型，这是必然的。
  - target 当枝节点不含任务约束目标时，子节点直接寻找自己的target即可，此时完全等同于各自独立的CFS，只是需要按照规划的参考路径中将其他机械臂作为障碍物。在这一步中，济川哥他们的方案是实现了一个多臂之间的距离函数并计算了梯度。但是有必要吗?关键原因在于不好实现。其实可以实现，好说。当然也可以下发为对上一个参考路径的约束。

- 如何同步子节点的求解问题？与消息邮局类似，所有子节点并非同时上传问题，枝节点应该以什么样的方式判断接受到了全部的问题>？如果没有，如何等待子节点上传问题?(总不能跑满线程吧)

这点还没想好

- 如何确认子节点一定是 CFS 节点或者其枝节点？
可以实现一个特征叫做CFS，该特征不包含常数泛型，但是包含CFS枝节点和CFS子节点，要求所有
